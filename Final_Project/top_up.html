<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCIS TOP UP</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        /* Custom Styles */
        body {
            background-color: #f8f9fa;
        }
        .accent-color { color: #6a0eff; }
        .hover-shadow-lg:hover {
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15) !important;
            transform: translateY(-0.25rem);
            transition: box-shadow 0.3s, transform 0.3s;
        }
        .rounded-3xl { border-radius: 1.5rem !important; }
        .carousel-img {
            height: 30vh;
            object-fit: cover;
        }
        @media (min-width: 768px) {
            .carousel-img { height: 50vh; }
        }
        .btn-custom-purple {
            background-color: #6f42c1;
            border-color: #6f42c1;
            color: white;
        }
        .btn-custom-purple:hover {
            background-color: #59369a;
            border-color: #59369a;
        }
        .text-purple {
            color: #6f42c1;
        }
        
        /* Product and Payment Card Selection Styles */
        .product-item, .payment-option-card {
            border: 2px solid transparent;
            cursor: pointer;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .product-item.selected, .payment-option-card.selected {
            border-color: #6f42c1;
            box-shadow: 0 0 0 2px #6f42c1;
        }
        
        .payment-option-card {
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: #fff;
            text-align: center;
            border: 1px solid #dee2e6;
        }
        .payment-option-card img {
            max-width: 60px;
            margin-bottom: 0.5rem;
        }
        .product-item .card-img-top {
            width: 80px;
            height: 80px;
            object-fit: cover;
            align-self: center;
            border-radius: 0.75rem;
        }
    </style>
</head>
<body class="bg-light">

    <header style="background-color: #6C48C5" class=" shadow-sm sticky-top">
        <nav class="container d-flex justify-content-between align-items-center py-3">
            <!-- Logo -->
            <a href="Main_Menu.html" style="color: white;" class="d-flex align-items-center text-decoration-none accent-color fw-bold fs-4">
                <img src="cat.jpg" width="30" height="24" alt="Logo" class="me-2">
                BCIS TOP UP
            </a>

            <!-- Menu Desktop -->
            <div class="d-none d-md-flex align-items-center gap-3" ">
                <a href="Main_Menu.html" class=" text-decoration-none" style="color: white;" >Beranda</a>
                <a href="Main_Menu.html" class=" text-decoration-none"style="color: white;" >Data Akun</a>
                <a href="Main_Menu.html" class=" text-decoration-none"style="color: white;" >Produk</a>
                <a href="Main_Menu.html" class=" text-decoration-none" style="color: white;">Tentang Kami</a>
                <a href="Main_Menu.html" class=" text-decoration-none" style="color: white;">Hubungi Kami</a>
                <!-- Search Bar -->
                <form class="position-relative ms-3">
                    <input type="search" placeholder="Cari..." class="form-control form-control-sm ps-3 pe-5" style="height: 36px;">
                    <button type="submit" class="btn position-absolute top-50 end-0 translate-middle-y me-2 p-0 border-0 bg-transparent text-secondary" style="width: 24px; height: 24px; font-size: 16px;">üîç</button>
                </form>
            </div>

            <!-- Hamburger Mobile -->
            <button class="d-md-none btn btn-link p-0" style="color: white;" type="button" data-bs-toggle="collapse" data-bs-target="#mobile-menu" aria-controls="mobile-menu" aria-expanded="false" aria-label="Toggle navigation">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="24" height="24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div class="collapse d-md-none bg-white border-top p-4" id="mobile-menu">
            <form class="mb-3 position-relative">
                <input type="search" placeholder="Cari game atau voucher..." class="form-control ps-3 pe-5">
                <span class="position-absolute top-50 end-0 translate-middle-y me-3 text-secondary" style="font-size: 18px;">üîç</span>
            </form>
            <a href="Main_Menu.html" class="d-block py-2 px-3 text-secondary text-decoration-none rounded">Beranda</a>
            <a href="Main_Menu.html" class="d-block py-2 px-3 text-secondary text-decoration-none rounded">Populer</a>
            <a href="Main_Menu.html" class="d-block py-2 px-3 text-secondary text-decoration-none rounded">Produk</a>
            <a href="Main_Menu.html" class="d-block py-2 px-3 text-secondary text-decoration-none rounded">Tentang Kami</a>
            <a href="Main_Menu.html" class="d-block py-2 px-3 text-secondary text-decoration-none rounded">Hubungi kami</a>
        </div>
    </header>

    <main>
        <!-- Carousel -->
        <section id="Beranda"  class=container my-5" style="margin-top: 20px;">
            <div class="rounded-3xl overflow-hidden">
                <div id="promoCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="Image/MLBB.jpeg" class="d-block w-100 carousel-img object-fit-cover" alt="Promo 1">
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
                                <h2 class="fw-bold">Promo Spesial Mobile Legends</h2>
                                <p>Dapatkan bonus diamond 20% untuk top up akhir pekan ini!</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="Image/Valorant.jpg" class="d-block w-100 carousel-img object-fit-cover" alt="Promo 2">
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
                                <h2 class="fw-bold">Valorant Points Termurah</h2>
                                <p>Harga terbaik untuk Valorant Points, proses instan dan aman.</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="Image/FreeFire.jpg" class="d-block w-100 carousel-img object-fit-cover" alt="Promo 3">
                            <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
                                <h2 class="fw-bold">Semua Game Favoritmu Ada Di Sini</h2>
                                <p>Dari MOBA hingga FPS, kami menyediakan top up untuk semua game.</p>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#promoCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#promoCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- TOP UP SEGMENT -->
        <section id="Produk">
            <div class="container py-4">
                <div class="row g-4">
                    <!-- Left Column: Main Content -->
                    <div class="col-lg-8">
                        <div class="d-flex flex-column gap-4">
                            <!-- 1. Masukkan Data -->
                            <div class="card shadow-sm rounded-3xl">
                                <div class="card-body p-4">
                                    <h4 class="fw-bold mb-3">1. Masukkan Data Akun</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="userID" class="form-label small">User ID</label>
                                            <input type="text" class="form-control" id="userID" placeholder="Masukkan User ID">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="server" class="form-label small">Server ID</label>
                                            <input type="text" class="form-control" id="server" placeholder="Masukkan Server ID">
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label for="nickname" class="form-label small">Nickname</label>
                                            <input type="text" class="form-control" id="nickname" placeholder="Masukkan Nickname Anda">
                                        </div>
                                    </div>
                                    <div class="alert alert-info small p-2 mb-0">
                                        <i class="bi bi-info-circle-fill me-1"></i> Pastikan data akun yang Anda masukkan sudah benar.
                                    </div>
                                </div>
                            </div>

                            <!-- 2. Pilih Nominal -->
                            <div class="card shadow-sm rounded-3xl">
                                <div class="card-body p-4">
                                    <h4 class="fw-bold mb-3">2. Pilih Nominal</h4>
                                    
                                    <!-- Mobile Legends Pass -->
                                    <h5 class="fw-bold mb-3"><i class="bi bi-controller text-purple"></i> Mobile Legends Pass</h5>
                                    <div class="row g-3">
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="Weekly Diamond Pass" data-price="26850">
                                                <div class="card-body d-flex flex-column p-3">
                                                    <img src="Image/wdp.jpg" class="card-img-top mb-3" alt=" Weekly Diamond Pass">
                                                    <h6 class="fw-bold mb-1">Weekly Diamond Pass</h6>
                                                    <p class="fs-5 fw-bold text-danger mb-0">Rp 26.850</p>
                                                    <s class="text-muted small">Rp 32.500</s>
                                                    <div class="mt-auto d-flex justify-content-end align-items-center pt-2">
                                                        <span class="badge bg-warning-subtle text-warning-emphasis fw-semibold">Disc 17%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="2x Weekly Diamond Pass" data-price="53700">
                                                <div class="card-body d-flex flex-column p-3">
                                                    <img src="Image/wdp.jpg" class="card-img-top mb-3" alt="2x Weekly Diamond Pass">
                                                    <h6 class="fw-bold mb-1">2x Weekly Diamond Pass</h6>
                                                    <p class="fs-5 fw-bold text-danger mb-0">Rp 53.700</p>
                                                    <s class="text-muted small">Rp 65.000</s>
                                                    <div class="mt-auto d-flex justify-content-end align-items-center pt-2">
                                                        <span class="badge bg-warning-subtle text-warning-emphasis fw-semibold">Disc 17%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="3x Weekly Diamond Pass" data-price="80550">
                                                <div class="card-body d-flex flex-column p-3">
                                                    <img src="Image/wdp.jpg" class="card-img-top mb-3" alt="3x Weekly Diamond Pass">
                                                    <h6 class="fw-bold mb-1">3x Weekly Diamond Pass</h6>
                                                    <p class="fs-5 fw-bold text-danger mb-0">Rp 80.550</p>
                                                    <s class="text-muted small">Rp 97.500</s>
                                                    <div class="mt-auto d-flex justify-content-end align-items-center pt-2">
                                                        <span class="badge bg-warning-subtle text-warning-emphasis fw-semibold">Disc 17%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="4x Weekly Diamond Pass" data-price="107400">
                                                <div class="card-body d-flex flex-column p-3">
                                                    <img src="Image/wdp.jpg" class="card-img-top mb-3" alt="4x Weekly Diamond Pass">
                                                    <h6 class="fw-bold mb-1">4x Weekly Diamond Pass</h6>
                                                    <p class="fs-5 fw-bold text-danger mb-0">Rp 107.400</p>
                                                    <s class="text-muted small">Rp 130.000</s>
                                                    <div class="mt-auto d-flex justify-content-end align-items-center pt-2">
                                                        <span class="badge bg-warning-subtle text-warning-emphasis fw-semibold">Disc 17%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="5x Weekly Diamond Pass" data-price="134200">
                                                <div class="card-body d-flex flex-column p-3">
                                                    <img src="Image/wdp.jpg" class="card-img-top mb-3" alt="5x Weekly Diamond Pass">
                                                    <h6 class="fw-bold mb-1">5x Weekly Diamond Pass</h6>
                                                    <p class="fs-5 fw-bold text-danger mb-0">Rp 134.200</p>
                                                    <s class="text-muted small">Rp 162.500</s>
                                                    <div class="mt-auto d-flex justify-content-end align-items-center pt-2">
                                                        <span class="badge bg-warning-subtle text-warning-emphasis fw-semibold">Disc 17%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="Twilight Pass" data-price="147650">
                                                <div class="card-body d-flex flex-column p-3">
                                                    <img src="Image/wdp.jpg" class="card-img-top mb-3" alt="2x Weekly Diamond Pass">
                                                    <h6 class="fw-bold mb-1">Twilight Pass</h6>
                                                    <p class="fs-5 fw-bold text-danger mb-0">Rp 147.650</p>
                                                    <s class="text-muted small">Rp 160.000</s>
                                                    <div class="mt-auto d-flex justify-content-end align-items-center pt-2">
                                                        <span class="badge bg-warning-subtle text-warning-emphasis fw-semibold">Disc 8%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="my-4">

                                    <!-- Mobile Legends Diamonds -->
                                    <h5 class="fw-bold mb-3"><i class="bi bi-gem text-purple"></i> Diamonds Instant ‚ö°</h5>
                                    <div class="row g-3">
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="30 Diamonds" data-price="8518">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">30 (28+2) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 8.518</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="89 Diamonds" data-price="23912">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">89 (81+8) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 23.912</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="170 Diamonds" data-price="47174">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">170 (154+16) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 47.174</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="370 Diamonds" data-price="103963">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">370 (333+37) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 103.963</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="601 Diamonds" data-price="158910">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">601 (533+68) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 158.910</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="1136 Diamonds" data-price="303370">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">1136 (1006+130) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 303.370</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="2536 Diamonds" data-price="644400">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">2536 (2182+354) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 644.400</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="4020 Diamonds" data-price="1010870">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">4020 (3416+604) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 1.010.870</p></div>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-6">
                                            <div class="card h-100 shadow-sm product-item" data-product-name="9302 Diamonds" data-price="2362234">
                                                <div class="card-body p-3 d-flex flex-column text-center">
                                                    <img src="Image/MLBB-Diamonds.webp" class="card-img-top mb-3" alt="Diamonds">
                                                <div class="card-body p-3"><h6 class="fw-bold mb-1">9302 (7826+1476) Diamonds</h6><p class="fs-5 fw-bold text-danger mb-0">Rp 2.362.234</p></div>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 3. Masukkan Jumlah -->
                            <div class="card shadow-sm rounded-3xl">
                                <div class="card-body p-4">
                                    <h4 class="fw-bold mb-3">3. Masukkan Jumlah</h4>
                                    <div class="input-group" style="max-width: 200px;">
                                        <button class="btn btn-outline-secondary" type="button" id="minusBtn">-</button>
                                        <input type="number" class="form-control text-center" id="quantityInput" value="1" min="1">
                                        <button class="btn btn-outline-secondary" type="button" id="plusBtn">+</button>
                                    </div>
                                </div>
                            </div>

                            <!-- 4. Pilih Pembayaran -->
                            <div class="card shadow-sm rounded-3xl">
                                <div class="card-body p-4 ">
                                    <h4 class="fw-bold mb-3">4. Pilih Metode Pembayaran</h4>
                                    <div class="row g-2">
                                        <div class="col-6 col-md-4 col-lg-3"  >
                                            <div class="payment-option-card" data-payment-name="QRIS" data-fee="521" data-image="qris">
                                                <img src="Image/qris.webp" alt="QRIS">
                                                <p class="fw-bold small mb-0 payment-price-display">Rp 0</p>
                                            </div>
                                        </div>
                                        <div class="col-6 col-md-4 col-lg-3">
                                            <div class="payment-option-card"  data-payment-name="BCA " data-fee="1000" data-image="bca">
                                                <img src="Image/bca.png"  alt="BCA">
                                                <p class="fw-bold small mb-0 payment-price-display">Rp 0</p>
                                            </div>
                                        </div>
                                        <div class="col-6 col-md-4 col-lg-3">
                                            <div class="payment-option-card" data-payment-name="GoPay" data-fee="750" data-image="GoPay">
                                                <img src="Image/gopay.png" alt="GoPay">
                                                <p class="fw-bold small mb-0 payment-price-display">Rp 0</p>
                                            </div>
                                        </div>
                                         <div class="col-6 col-md-4 col-lg-3">
                                            <div class="payment-option-card" data-payment-name="DANA" data-fee="800" data-image="dana">
                                                <img src="Image/dana.png" alt="DANA">
                                                <p class="fw-bold small mb-0 payment-price-display">Rp 0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Summary (Sticky) -->
                    <div class="col-lg-4">
                        <div class="position-sticky" style="top: 100px;">
                            <div class="card shadow-sm rounded-3xl">
                                <div class="card-body p-4">
                                    <div class="d-flex align-items-center mb-3 " ">
                                        <img src="Image/MLBB-Diamonds.webp" style="width: 60px; height: 60px; object-fit: cover; " id="summary-product-image" class="rounded me-3" alt="Produk">
                                        <div>
                                            <h6 class="fw-bold mb-0">Mobile Legends</h6>
                                            <p class="text-muted small mb-0" id="summary-product-detail">Pilih item...</p>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span class="text-muted">Metode Pembayaran</span>
                                        <span class="fw-bold" id="summary-payment-method">-</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span class="text-muted">Harga</span>
                                        <span class="fw-bold" id="summary-price">Rp 0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span class="text-muted">Jumlah</span>
                                        <span class="fw-bold" id="summary-quantity">1</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span class="text-muted">Biaya Admin</span>
                                        <span class="fw-bold" id="summary-fee">Rp 0</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h5 class="fw-bold mb-0">Total</h5>
                                        <h5 class="fw-bold text-purple mb-0" id="summary-total">Rp 0</h5>
                                    </div>
                                </div>
                            </div>
                            <button id="order-now-btn" class="btn btn-custom-purple btn-lg w-100 fw-bold p-3 mt-3">Pesan Sekarang!</button>
                            <script>
                                document.getElementById("order-now-btn").addEventListener("click", async () => {
                                    const user = JSON.parse(localStorage.getItem("user"));
                                    if (!user) {
                                        alert("Silakan login dulu");
                                        window.location.href = "login.php";
                                        return;
                                    }

                                    const data = JSON.parse(localStorage.getItem("transactionData"));

                                    const send = await fetch(API_URL + "create_order", {
                                        method: "POST",
                                        body: JSON.stringify({
                                            userId: user.id,
                                            productId: data.productName, 
                                            qty: data.quantity,
                                            payment: data.paymentFee
                                        })
                                    });

                                    const res = await send.json();

                                    if (res.status === "success") {
                                        alert("Order berhasil!");
                                        window.location.href = "orders.php";
                                    }
                                });
                                </script>

                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer style="background-color: #6C48C5;" class="text-white">
    <div class="bg-warning" style="height: 0.5rem;"></div>

    <div class="container py-5 px-4">
        <div class="row g-4">

            <div class="col-12 col-md-4 col-lg-3">
                <a href="#" class="fs-4 fw-bold text-white text-decoration-none d-flex align-items-center mb-3">
                    <img src="cat.jpg" width="30" height="24" alt="Logo" class="me-2">
                    BCIS TOP UP
                </a>
                <p class="small">Website Top Up Game Termurah Dan Tercepat Se-Indonesia</p>
                <div class="mt-4">
                    <a href="#" class="text-white">
                        <img src="ig.jpeg" width="30" height="24" alt="instagram">
                    </a>
                </div>
            </div>

            <div class="col-12 col-md-4 col-lg-3">
                <h5 class="text-warning text-uppercase fw-semibold">Peta Situs</h5>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="Main_Menu.html" class="nav-link p-0 text-white">Beranda</a></li>
                    <li class="nav-item mb-2"><a href="Main_Menu.html" class="nav-link p-0 text-white">Populer</a></li>
                    <li class="nav-item mb-2"><a href="Main_Menu.html" class="nav-link p-0 text-white">Produk</a></li>
                    <li class="nav-item mb-2"><a href="Main_Menu.html" class="nav-link p-0 text-white">Profile Developer </a></li>
                </ul>
            </div>

            <div class="col-12 col-md-4 col-lg-3">
                <h5 class="text-warning text-uppercase fw-semibold">Dukungan</h5>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="Main_Menu.html" class="nav-link p-0 text-white">Laporan </a></li>
                </ul>
            </div>

            <div class="col-12 col-md-4 col-lg-3">
                <h5 class="text-warning text-uppercase fw-semibold">Legalitas</h5>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Kebijakan Privasi</a></li>
                    <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-white">Syarat & Ketentuan</a></li>
                </ul>
            </div>

        </div>
    </div>

    <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.2);">
         2025 BCIS TOP UP. FINAL PROJECT PPW.
    </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- ELEMENT SELECTORS ---
    const productItems = document.querySelectorAll('.product-item');
    const paymentOptions = document.querySelectorAll('.payment-option-card');
    const quantityInput = document.getElementById('quantityInput');
    const plusBtn = document.getElementById('plusBtn');
    const minusBtn = document.getElementById('minusBtn');
    const orderNowBtn = document.getElementById('order-now-btn');
    const userIDInput = document.getElementById('userID');
    const serverIDInput = document.getElementById('server');
    const nicknameInput = document.getElementById('nickname');
    
    // Summary Elements
    const summaryProductDetail = document.getElementById('summary-product-detail');
    const summaryPaymentMethod = document.getElementById('summary-payment-method');
    const summaryPrice = document.getElementById('summary-price');
    const summaryQuantity = document.getElementById('summary-quantity');
    const summaryFee = document.getElementById('summary-fee');
    const summaryTotal = document.getElementById('summary-total');
    const paymentPriceDisplays = document.querySelectorAll('.payment-price-display');
    const summaryProductImage = document.getElementById('summary-product-image');

    // --- STATE MANAGEMENT ---
    let selectedProduct = null;
    let selectedPayment = null;
    let quantity = 1;

    // --- HELPER FUNCTIONS ---
    function formatRupiah(number) {
        return new Intl.NumberFormat('id-ID', {
            style: 'currency',
            currency: 'IDR',
            minimumFractionDigits: 0
        }).format(number);
    }

    // --- MAIN UPDATE FUNCTION ---
    function updateSummary() {
        const basePrice = selectedProduct ? parseInt(selectedProduct.dataset.price) : 0;
        const paymentFee = selectedPayment ? parseInt(selectedPayment.dataset.fee) : 0;
        
        const total = (basePrice * quantity) + paymentFee;

        // Update summary text
        summaryProductDetail.textContent = selectedProduct ? selectedProduct.dataset.productName : 'Pilih item...';
        summaryPaymentMethod.textContent = selectedPayment ? selectedPayment.dataset.paymentName : '-';
        summaryPrice.textContent = formatRupiah(basePrice * quantity);
        summaryQuantity.textContent = quantity;
        summaryFee.textContent = formatRupiah(paymentFee);
        summaryTotal.textContent = formatRupiah(total);
        
        if (selectedProduct) {
            const productImage = selectedProduct.querySelector('.card-img-top');
            if (productImage) {
                summaryProductImage.src = productImage.src;
            }
        }

        // Update prices on payment method cards
        paymentPriceDisplays.forEach(display => {
            const card = display.closest('.payment-option-card');
            const fee = parseInt(card.dataset.fee);
            const finalPrice = (basePrice * quantity) + fee;
            display.textContent = formatRupiah(finalPrice);
        });
    }

    // --- EVENT LISTENERS ---

    productItems.forEach(item => {
        item.addEventListener('click', function() {
            productItems.forEach(p => p.classList.remove('selected'));
            this.classList.add('selected');
            selectedProduct = this;
            updateSummary();
        });
    });

    paymentOptions.forEach(option => {
        option.addEventListener('click', function() {
            paymentOptions.forEach(p => p.classList.remove('selected'));
            this.classList.add('selected');
            selectedPayment = this;
            updateSummary();
        });
    });
    
    plusBtn.addEventListener('click', () => {
        quantityInput.value = parseInt(quantityInput.value) + 1;
        quantity = parseInt(quantityInput.value);
        updateSummary();
    });

    minusBtn.addEventListener('click', () => {
        let currentValue = parseInt(quantityInput.value);
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1;
            quantity = parseInt(quantityInput.value);
            updateSummary();
        }
    });
    
    quantityInput.addEventListener('input', function() {
        quantity = parseInt(this.value) || 1;
        if (quantity < 1) {
            quantity = 1;
            this.value = 1;
        }
        updateSummary();
    });

    orderNowBtn.addEventListener('click', () => {
        if (!userIDInput.value || !serverIDInput.value) {
            alert('Harap isi User ID dan Server ID.');
            return;
        }
        if (!nicknameInput.value) {
            alert('Harap isi Nickname Anda.');
            return;
        }
        if (!selectedProduct) {
            alert('Harap pilih produk terlebih dahulu.');
            return;
        }
        if (!selectedPayment) {
            alert('Harap pilih metode pembayaran.');
            return;
        }

  
        const transactionData = {
            userId: userIDInput.value,
            serverId: serverIDInput.value,
            nickname: nicknameInput.value,
            productName: selectedProduct.dataset.productName,
            productImage: selectedProduct.querySelector('.card-img-top').src,
            basePrice: parseInt(selectedProduct.dataset.price),
            quantity: quantity,
            paymentFee: parseInt(selectedPayment.dataset.fee)
        };
        
        localStorage.setItem('transactionData', JSON.stringify(transactionData));
        

        window.location.href = 'proses_pembayaran.html';
    });


    if (productItems.length > 0) {
        productItems[0].click();
    }
    if (paymentOptions.length > 0) {
        paymentOptions[0].click();
    }
    
    updateSummary(); 
});
</script>
<script>
const API_URL = "http://final-project.test/api.php?action=";
</script>
</body>
</html>
